---
// Pricing COMPLETO - Todas as features da tabela oficial com ver mais/menos

const plans = [
  {
    name: 'Pessoal',
    price: 'Grátis',
    description: 'Para quem apenas participa de outras contas ou quer ter um espaço pessoal.',
    features: [
      'Assento Convidado',
      '100 MB Incluídos',
      'Workspace Pessoal',
      'Quadros Ágeis',
      'Drive e Arquivos Compartilháveis',
      'Busca Avançada',
      'Central de ajuda',
      'Suporte - Copilot'
    ],
    cta: 'Começar grátis',
    highlight: false
  },
  {
    name: 'Pro',
    price: 'R$ 65',
    period: '/usuário',
    description: 'Ideal para trabalho em equipe, departamentos ou pequenos negócios.',
    includes: 'Inclui Pessoal, mais:',
    features: [
      '5 Assentos Incluídos',
      '10 GB Incluídos',
      'Assento Convidado Gratuito',
      'Workspaces Profissionais',
      'Projetos e Campanhas',
      'Equipes',
      'Gestão de Arquivos',
      'Aprovações de Arquivos e Textos',
      'Comunicador Integrado',
      'Calendários e Cronogramas',
      'Suporte - Tickets'
    ],
    cta: 'Começar Pro',
    highlight: false
  },
  {
    name: 'Business',
    price: 'R$ 95',
    period: '/usuário',
    badge: 'Mais popular',
    description: 'Perfeito para negócios estabelecidos que querem escalar.',
    includes: 'Inclui Pro, mais:',
    features: [
      '10 Assentos Incluídos',
      '50 GB Incluídos',
      'Assento Convidado Gratuito',
      'Portais de Relacionamento',
      'Organização Hierárquica',
      'White Label',
      'Copilot',
      'Gestão de Pessoas',
      'Time-Tracking',
      'Integrações Nativas',
      'Gerente de Sucesso',
      'Suporte Prioritário'
    ],
    cta: 'Começar Business',
    highlight: true
  },
  {
    name: 'Enterprise',
    price: 'Consulte',
    description: 'Ambiente customizável e adaptável a organizações maiores.',
    includes: 'Inclui Business, mais:',
    features: [
      'Assentos sob consulta',
      'Armazenamento sob consulta',
      'Assento Convidado Gratuito',
      'Permissionamento Organizacional',
      'Subcontas',
      'Single Sign-On / SAML',
      'Métricas e Painel B.I',
      'Integrações Personalizadas',
      'Programa de Onboarding',
      'Programa de Treinamento',
      'Gerente de Contas',
      'Suporte Personalizado'
    ],
    cta: 'Falar com vendas',
    highlight: false
  }
];
---

<section id="pricing" class="py-[6rem] bg-white fade-section">
  <div class="max-w-[80rem] mx-auto px-[0.5rem] md:px-[1.5rem] lg:px-[2rem]">
    
    <!-- Header -->
    <div class="text-center mb-[3rem]">
      <p class="text-[0.875rem] font-medium text-[#6D28D9] mb-[0.5rem]">Preços</p>
      <h2 class="text-[2rem] sm:text-[2.5rem] font-semibold text-[#0A0A0A] mb-[0.5rem]">
        Preços claros. Sem surpresas.
      </h2>
      <p class="text-[1rem] text-[#737373]">
        Cancele quando quiser. Sem fidelidade.
      </p>
    </div>
    
    <!-- Grid de planos -->
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-[1rem] items-stretch">
      {plans.map((plan, index) => (
        <div class={`pricing-card relative flex flex-col p-[1.5rem] rounded-[0.75rem] border transition-all duration-200 ${
          plan.highlight 
            ? 'bg-[#1a1625] border-[#1a1625] text-white shadow-xl' 
            : 'bg-white border-[#E5E5E5] hover:border-[#6D28D9]/30'
        }`} data-plan={index}>
          
          {/* Badge */}
          {plan.badge && (
            <div class="absolute -top-[0.75rem] left-1/2 -translate-x-1/2 px-[0.75rem] py-[0.25rem] bg-[#6D28D9] text-white text-[0.6875rem] font-medium rounded-full">
              {plan.badge}
            </div>
          )}
          
          <h3 class={`text-[1.125rem] font-semibold mb-[0.25rem] ${plan.highlight ? 'text-white' : 'text-[#0A0A0A]'}`}>
            {plan.name}
          </h3>
          
          <div class="mb-[0.75rem]">
            <span class={`text-[1.75rem] font-bold ${plan.highlight ? 'text-white' : 'text-[#0A0A0A]'}`}>
              {plan.price}
            </span>
            {plan.period && (
              <span class={`text-[0.875rem] ${plan.highlight ? 'text-white/60' : 'text-[#737373]'}`}>{plan.period}</span>
            )}
          </div>
          
          <p class={`text-[0.8125rem] mb-[1rem] leading-relaxed ${plan.highlight ? 'text-white/70' : 'text-[#737373]'}`}>
            {plan.description}
          </p>
          
          {plan.includes && (
            <p class={`text-[0.75rem] font-medium mb-[0.5rem] ${plan.highlight ? 'text-white/80' : 'text-[#0A0A0A]'}`}>
              {plan.includes}
            </p>
          )}
          
          <!-- Features (Todas visíveis) -->
          <ul class="features-list space-y-[0.375rem] mb-[1rem] flex-grow">
            {plan.features.map((feature, fIndex) => (
              <li class={`feature-item flex items-start gap-[0.5rem] text-[0.75rem] ${plan.highlight ? 'text-white/80' : 'text-[#525252]'}`}>
                <svg class="w-[0.875rem] h-[0.875rem] flex-shrink-0 text-[#6D28D9] mt-[0.0625rem]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                {feature}
              </li>
            ))}
          </ul>
          
          <button class={`w-full py-[0.75rem] rounded-[0.5rem] font-medium text-[0.875rem] transition-all duration-200 cursor-pointer mt-auto ${
            plan.highlight 
              ? 'bg-white text-[#0A0A0A] hover:bg-[#F5F5F5]' 
              : 'bg-[#0A0A0A] text-white hover:bg-[#262626]'
          }`}>
            {plan.cta}
          </button>
          
        </div>
      ))}
    </div>
    
  </div>
</section>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.toggle-features').forEach(btn => {
      btn.addEventListener('click', () => {
        const planIndex = btn.dataset.plan;
        const card = document.querySelector(`.pricing-card[data-plan="${planIndex}"]`);
        const list = card.querySelector('.features-list');
        const isCollapsed = list.dataset.collapsed === 'true';
        
        // Toggle visibility of hidden items
        list.querySelectorAll('.feature-item').forEach(item => {
          const index = parseInt(item.dataset.index);
          if (index >= 5) {
            item.classList.toggle('hidden', !isCollapsed);
          }
        });
        
        // Update state
        list.dataset.collapsed = isCollapsed ? 'false' : 'true';
        
        // Update button text
        const text = btn.querySelector('.toggle-text');
        const icon = btn.querySelector('.toggle-icon');
        if (isCollapsed) {
          text.textContent = 'Ver menos';
          icon.style.transform = 'rotate(180deg)';
        } else {
          const hiddenCount = list.querySelectorAll('.feature-item[data-index]').length - 5;
          text.textContent = `Ver mais (${hiddenCount})`;
          icon.style.transform = 'rotate(0deg)';
        }
      });
    });
  });
</script>

<style>
  .fade-section {
    opacity: 0;
    transform: translateY(2rem);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .fade-section.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>
